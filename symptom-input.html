<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Symptom Analysis - MediConnect</title>
        <link rel="stylesheet" href="styles.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900&display=swap" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
        <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    </head>
    <body class="bg-slate-50 min-h-screen flex flex-col" style='font-family: Manrope, "Noto Sans", sans-serif;'>
        <!-- Header -->
        <header class="sticky top-0 z-40 border-b border-slate-200/70 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div class="flex h-16 items-center justify-between">
                    <a href="index.html" class="flex items-center gap-2.5 group" aria-label="MediConnect Home">
                        <span class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-gradient-to-br from-sky-500 to-emerald-400 text-white shadow-sm">
                            <i class="fas fa-heartbeat"></i>
                        </span>
                        <span class="text-lg font-extrabold tracking-tight group-hover:text-sky-600 transition">MediConnect</span>
                    </a>
                    <nav class="hidden md:flex items-center gap-8 text-sm font-medium">
                        <a class="hover:text-sky-700" href="index.html">Home</a>
                        <a class="hover:text-sky-700" href="symptom-input.html">Symptom Check</a>
                        <a class="hover:text-sky-700" href="doctor-booking.html">Book Doctor</a>
                        <a class="hover:text-sky-700" href="e-pharma.html">E-Pharmacy</a>
                    </nav>
                    <button id="mobileMenuBtn" class="md:hidden inline-flex h-9 w-9 items-center justify-center rounded-md border border-slate-300 text-slate-700">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                <div id="mobileMenu" class="md:hidden hidden pb-4">
                    <nav class="grid gap-2 text-sm">
                        <a class="rounded-lg px-3 py-2 hover:bg-slate-100" href="index.html">Home</a>
                        <a class="rounded-lg px-3 py-2 hover:bg-slate-100" href="symptom-input.html">Symptom Check</a>
                        <a class="rounded-lg px-3 py-2 hover:bg-slate-100" href="doctor-booking.html">Book Doctor</a>
                        <a class="rounded-lg px-3 py-2 hover:bg-slate-100" href="e-pharma.html">E-Pharmacy</a>
                    </nav>
                </div>
            </div>
        </header>

        <!-- Content -->
        <main class="flex-1 w-full flex justify-center px-4 py-10">
            <div class="w-full max-w-3xl @container">
                <div class="bg-white/90 backdrop-blur rounded-2xl shadow-md p-8 md:p-10 border border-[#e7eef3] relative overflow-hidden">
                    <div class="absolute -top-24 -right-24 w-72 h-72 bg-gradient-to-br from-[#1991e6]/20 to-[#00bfa6]/10 rounded-full blur-3xl"></div>
                    <div class="absolute -bottom-32 -left-24 w-80 h-80 bg-gradient-to-tr from-[#1991e6]/10 to-[#00bfa6]/10 rounded-full blur-3xl"></div>
                    <a href="index.html" class="inline-flex items-center gap-2 text-[#1991e6] text-sm font-medium mb-6 hover:underline">
                        <i class="fas fa-arrow-left"></i>
                        Back to Home
                    </a>
                    <div class="flex flex-col gap-2 text-center mb-6">
                        <h1 class="text-3xl md:text-4xl font-black tracking-[-0.03em] text-[#0e151b] flex items-center justify-center gap-3">
                            <i class="fas fa-stethoscope text-[#1991e6]"></i>
                            Symptom Analysis
                        </h1>
                        <p class="text-[#4e7997] max-w-2xl mx-auto text-sm md:text-base">Describe your symptoms in detail to receive AI-powered risk assessment and guidance.</p>
                    </div>
                    <form id="symptomForm" class="space-y-6">
                        <div class="form-group">
                            <div class="flex items-center justify-between mb-2">
                                <label for="symptoms" class="block text-sm font-semibold text-[#0e151b] flex items-center gap-2 m-0">
                                    <i class="fas fa-edit text-[#1991e6]"></i>
                                    Describe your symptoms
                                </label>
                                <button type="button" id="micBtn" aria-pressed="false" aria-label="Start voice input" class="h-9 w-9 rounded-lg flex items-center justify-center border border-[#d0dde7] text-[#1991e6] hover:bg-[#1991e6] hover:text-white transition focus:outline-none focus:ring-2 focus:ring-[#1991e6]/40">
                                    <i class="fas fa-microphone"></i>
                                </button>
                            </div>
                            <textarea id="symptoms" name="symptoms" class="w-full resize-y rounded-xl border border-[#d0dde7] bg-slate-50 focus:bg-white focus:border-[#1991e6] focus:ring-2 focus:ring-[#1991e6]/30 text-sm md:text-base p-4 min-h-[160px]" placeholder="E.g. Headaches for 3 days with nausea and light sensitivity. Pain mostly on right side..." required></textarea>
                            <div id="micStatus" class="text-xs text-[#4e7997] mt-2 hidden">Listening...</div>
                        </div>
                         <div class="form-group">
                             <label for="symptomImage" class="block text-sm font-semibold text-[#0e151b] flex items-center gap-2 m-0">
                                 <i class="fas fa-image text-[#1991e6]"></i>
                                 Upload image (optional)
                             </label>
                             <input type="file" id="symptomImage" name="image" accept="image/*" class="mt-2 block w-full text-sm text-[#0e151b] file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[#e3f2fd] file:text-[#1976D2] hover:file:bg-[#d6ebff]" />
                             <p class="text-xs text-[#4e7997] mt-2">Attach a relevant photo (e.g., skin rash). Supported formats: JPG, PNG, HEIC.</p>
                         </div>
                        <button type="submit" class="analyse-btn relative overflow-hidden group" id="analyseBtn">
                            <span class="relative z-10 flex items-center gap-2"><i class="fas fa-brain"></i><span id="btnText">Analyse Symptoms</span></span>
                            <div class="loading" id="loadingSpinner" style="display:none;"></div>
                        </button>
                    </form>
                    <div class="mt-10 grid gap-4 md:grid-cols-2">
                        <div class="col-span-1 md:col-span-2 p-4 rounded-xl border border-[#d0dde7] bg-gradient-to-br from-[#e3f2fd] to-[#f5fbff]">
                            <h4 class="text-[#1976D2] font-semibold mb-2 flex items-center gap-2 text-sm">
                                <i class="fas fa-info-circle"></i> Tips for better analysis
                            </h4>
                            <ul class="text-[#1976D2] text-xs md:text-sm list-disc list-inside space-y-1">
                                <li>Include duration of symptoms</li>
                                <li>Describe severity and frequency</li>
                                <li>Mention triggers or patterns</li>
                                <li>List all symptoms you're experiencing</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="border-t border-slate-200/70 py-10">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col items-center gap-4 text-center">
                    <div class="flex items-center gap-2.5">
                        <span class="inline-flex h-8 w-8 items-center justify-center rounded-md bg-sky-600 text-white"><i class="fas fa-heartbeat"></i></span>
                        <span class="font-extrabold">MediConnect</span>
                    </div>
                    <div class="flex flex-wrap items-center justify-center gap-6 text-sm text-slate-600">
                        <a href="#" class="hover:text-slate-900">Terms</a>
                        <a href="#" class="hover:text-slate-900">Privacy</a>
                        <a href="#" class="hover:text-slate-900">Contact</a>
                    </div>
                    <p class="text-xs text-slate-500">Â© 2025 MediConnect. All rights reserved.</p>
                </div>
            </div>
        </footer>

        <!-- SOS Floating Button and Modal -->
        <button id="sosBtn" class="fixed bottom-6 right-6 z-50 group inline-flex items-center gap-3 rounded-full bg-red-600 px-5 py-3 font-semibold text-white shadow-lg shadow-red-500/30 hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-400/60 transition">
            <i class="fas fa-truck-medical text-lg animate-pulse"></i>
            <span class="hidden sm:inline">SOS / Ambulance</span>
        </button>
        <div id="sosModal" class="fixed inset-0 z-[60] hidden items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
            <div class="relative w-full max-w-md overflow-hidden rounded-2xl border border-red-100 bg-white shadow-2xl">
                <div class="pointer-events-none absolute -top-20 -right-24 h-72 w-72 rounded-full bg-red-500/10 blur-3xl"></div>
                <div class="relative p-6 space-y-5">
                    <div class="flex items-start gap-4">
                        <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-red-600 text-white shadow-md">
                            <i class="fas fa-truck-medical text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="mb-1 text-xl font-extrabold tracking-tight">Emergency Request</h3>
                            <p class="text-sm text-slate-600">Use for real emergencies only. Location (if permitted) helps faster dispatch.</p>
                        </div>
                    </div>
                    <form id="sosForm" class="space-y-4">
                        <div>
                            <label for="sosType" class="mb-1 block text-xs font-semibold uppercase tracking-wide">Emergency Type</label>
                            <select id="sosType" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-red-500 focus:ring-2 focus:ring-red-500">
                                <option value="cardiac">Cardiac / Chest Pain</option>
                                <option value="accident">Accident / Trauma</option>
                                <option value="breathing">Breathing Difficulty</option>
                                <option value="stroke">Stroke Symptoms</option>
                                <option value="other">Other Critical</option>
                            </select>
                        </div>
                        <div>
                            <label for="sosNotes" class="mb-1 block text-xs font-semibold uppercase tracking-wide">Brief Notes (optional)</label>
                            <textarea id="sosNotes" rows="3" class="w-full resize-none rounded-lg border border-slate-300 px-3 py-2 text-sm focus:border-red-500 focus:ring-2 focus:ring-red-500" placeholder="e.g., severe chest pain for 10 mins, history of hypertension"></textarea>
                        </div>
                        <div class="flex items-center gap-2 text-xs text-slate-600">
                            <i class="fas fa-location-crosshairs text-red-500"></i>
                            <span id="sosLocationStatus">Location not acquired yet.</span>
                        </div>
                        <div class="flex flex-col gap-2">
                            <button type="button" id="confirmSosBtn" class="h-11 w-full inline-flex items-center justify-center gap-2 rounded-lg bg-red-600 font-bold text-white shadow-lg shadow-red-500/30 transition hover:bg-red-700 disabled:cursor-not-allowed disabled:opacity-50">
                                <i class="fas fa-siren-on"></i>
                                <span>Confirm Emergency Dispatch</span>
                            </button>
                            <button type="button" id="cancelSosBtn" class="h-11 w-full inline-flex items-center justify-center gap-2 rounded-lg bg-slate-200 font-semibold text-slate-800 transition hover:bg-slate-300">
                                <i class="fas fa-xmark"></i>
                                Cancel
                            </button>
                        </div>
                        <p class="text-[11px] leading-snug text-amber-600"><strong>Warning:</strong> False requests may be reported and could delay real cases.</p>
                    </form>
                    <div id="sosFeedback" class="hidden rounded-lg border p-3 text-sm font-medium"></div>
                </div>
            </div>
        </div>

        <script src="config.js"></script>
        <script src="api-service.js"></script>
        <script src="script.js"></script>
        <script>
            const btn = document.getElementById('mobileMenuBtn');
            const menu = document.getElementById('mobileMenu');
            if (btn && menu) btn.addEventListener('click', () => menu.classList.toggle('hidden'));
        </script>
    </body>
</html>
